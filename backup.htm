<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generate Baseball Bat Images per Conditions</title>
    <link rel="icon" type="image/x-icon" href="./favicon.png" />
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <link rel="stylesheet" href="./assets/css/examples.css" />
</head>

<body>

    <nav class="navbar" style="background-color: #000000">
        <div class="app-header">
            <a href="">
                <img src="./logo.png" class="logo" />
            </a>
            <a class="title" href="" style="color: #f0ab3c">Baseball Bat Image Generator</a>
        </div>
    </nav>

    <div>Type conditions here:</div>

    <table>

        <tr>
            <td>Length (inches)</td>
            <td><input type="text" style="border:3px solid #F7730E;" value="0" id="lengthInput" /></td>

            <td>Weight (ounces)</td>
            <td><input type="text" style="border:3px solid #F7730E;" value="0" id="weightInput" /></td>

            <td>Material</td>
            <td><input type="text" style="border:3px solid #F7730E;" value="Wood" id="materialInput" /></td>
        </tr>

    </table>

    <button id="generateImage" py-click="generateBaseballBatImage()" class="py-button">Generate Image</button>

    <p id="generatedImage"></p>

    <section class="pyscript">
        <div id="mpl"></div>

        <py-config>
            packages = [
              "matplotlib",
              "pandas",
            ]
            plugins = [
              "https://pyscript.net/latest/plugins/python/py_tutor.py"
            ]
        </py-config>

        <script type="py">
            import matplotlib.pyplot as plt
            import numpy as np
            from pyodide.http import open_url
            from js import console

            def generateBaseballBatImage():
                length = float(Element('lengthInput').element.value)
                weight = float(Element('weightInput').element.value)
                material = Element('materialInput').element.value

                # Generate image based on input conditions
                # Example code to generate a placeholder image
                image = np.random.rand(100, 100)

                fig, ax = plt.subplots()
                ax.imshow(image, cmap='gray')
                ax.set_title(f'Baseball Bat ({length} inches, {weight} ounces, Material: {material})')
                plt.axis('off')

                # Convert matplotlib figure to base64 encoded image
                import io
                buf = io.BytesIO()
                fig.savefig(buf, format='png')
                buf.seek(0)
                image_data = buf.getvalue()
                encoded_image = f"data:image/png;base64,{buf}"

                # Display the generated image on the webpage
                Element('generatedImage').element.innerHTML = f'<img src="{encoded_image}">'
        </script>
    </section>

</body>

</html>
